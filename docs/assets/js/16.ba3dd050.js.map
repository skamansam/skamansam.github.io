{"version":3,"sources":["webpack:///node_modules/vue-disqus/src/Disqus.vue","webpack:///./node_modules/vue-disqus/src/Disqus.vue?61d3","webpack:///./node_modules/vue-disqus/src/Disqus.vue","webpack:///./node_modules/vue-disqus/src/Disqus.vue?624e","webpack:///./node_modules/vue-disqus/src/Disqus.vue?35e6","webpack:///./node_modules/vue-disqus/src/constants.js","webpack:///./node_modules/vue-disqus/src/utils.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAUoB;AACiB;;AAEtB;AACf;;AAEA;AACA;AACA;AACA;AACA,4DAA4D,2DAAgB;AAC5E;AACA;AACA;AACA,4DAA4D,mDAAQ;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,sCAAsC,mEAAwB;AAC9D;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,MAAM,oDAAS;AACf;AACA,qBAAqB,0DAAW;AAChC;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;ACzJD;AAAA;AAAA;AAAA,0BAA0B,aAAa,0BAA0B,wBAAwB,iBAAiB,aAAa,qBAAqB,QAAQ,sBAAsB;AAC1K;;;;;;;;;;;;;;ACDA;AAAA;AAAA;AAAA;AAAqF;AAC3B;AACL;;;AAGrD;AAC6E;AAC7E,gBAAgB,8FAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,iFAAM;AACR,EAAE,0FAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEe,gF;;;;;;;;;;;;AClBf;AAAA;AAAA,wCAAqJ,CAAgB,uNAAG,EAAC,C;;;;;;;;;;;;ACAzK;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAO;AACA;AACA;AACA;;;;;;;;;;;;;ACHP;AAAA;AAAA;AAAO;AACA","file":"assets/js/16.ba3dd050.js","sourcesContent":["<template>\r\n  <div id=\"disqus_thread\" style=\"min-height: 200px\" />\r\n</template>\r\n\r\n<script>\r\nimport {\r\n  SSO_KEYS,\r\n  CALLBACKS,\r\n  PAGE_CONFIG_KEYS,\r\n  ERROR_SHORTNAME_REQUIRED\r\n} from './constants'\r\nimport { getEmitName } from './utils'\r\n\r\nexport default {\r\n  name: 'Disqus',\r\n\r\n  props: {\r\n    shortname: String,\r\n    pageConfig: {\r\n      type: Object,\r\n      validator: config => Object.keys(config).every(key => PAGE_CONFIG_KEYS.includes(key))\r\n    },\r\n    ssoConfig: {\r\n      type: Object,\r\n      validator: config => Object.keys(config).every(key => SSO_KEYS.includes(key))\r\n    },\r\n    lang: {\r\n      type: String,\r\n      default: 'en'\r\n    },\r\n    lazy: {\r\n      type: Boolean,\r\n      default: true\r\n    },\r\n    lazyConfig: {\r\n      type: Object,\r\n      default: () => ({\r\n        root: null,\r\n        rootMargin: '300px',\r\n        threshold: 0.5\r\n      })\r\n    }\r\n  },\r\n\r\n  data: () => ({\r\n    observer: null\r\n  }),\r\n\r\n  computed: {\r\n    getShortname () {\r\n      const shortname = this.shortname ? this.shortname : this.$disqus ? this.$disqus.shortname : null\r\n      if (!shortname) throw new Error(ERROR_SHORTNAME_REQUIRED)\r\n      return shortname\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    lang () {\r\n      this.reset()\r\n    }\r\n  },\r\n\r\n  mounted () {\r\n    if (this.lazy) return this.observerDisqus()\r\n    this.init()\r\n  },\r\n\r\n  methods: {\r\n    init () {\r\n      if (this.$disqus) {\r\n        this.$disqus.reset = this.reset\r\n      }\r\n      if (window.DISQUS) {\r\n        return this.reset()\r\n      }\r\n      const setBaseConfig = this.setBaseConfig\r\n      window.disqus_config = function () {\r\n        setBaseConfig(this)\r\n      }\r\n      this.loadEmbedScript()\r\n      if (this.$route) this.$watch('$route.path', () => this.reset())\r\n    },\r\n\r\n    reset (dsq = window.DISQUS) {\r\n      const setBaseConfig = this.setBaseConfig\r\n      dsq.reset({\r\n        reload: true,\r\n        config: function () {\r\n          setBaseConfig(this)\r\n        }\r\n      })\r\n    },\r\n\r\n    observerDisqus () {\r\n      if ('IntersectionObserver' in window) {\r\n        this.observer = new IntersectionObserver(this.handleObserver, this.lazyConfig)\r\n        return this.observer.observe(this.$el)\r\n      }\r\n      this.init()\r\n    },\r\n\r\n    handleObserver (entries) {\r\n      entries.forEach(entry => {\r\n        if (entry.isIntersecting) {\r\n          this.observer.disconnect()\r\n          this.init()\r\n        }\r\n      })\r\n    },\r\n\r\n    loadEmbedScript () {\r\n      const d = document\r\n      const s = d.createElement('script')\r\n      s.setAttribute('id', 'embed-disqus')\r\n      s.setAttribute('data-timestamp', +new Date())\r\n      s.type = 'text/javascript'\r\n      s.async = true\r\n      s.src = `//${this.getShortname}.disqus.com/embed.js`\r\n      ;(d.head || d.body).appendChild(s)\r\n    },\r\n\r\n    setBaseConfig (disqusConfig) {\r\n      this.setPageConfig(disqusConfig)\r\n      this.cbDisqus(disqusConfig)\r\n\r\n      if (this.ssoConfig && Object.keys(this.ssoConfig).length) {\r\n        Object.assign(disqusConfig.sso, this.ssoConfig)\r\n      }\r\n\r\n      disqusConfig.language = this.lang\r\n    },\r\n\r\n    setPageConfig (disqusConfig) {\r\n      const defaultConfig = {\r\n        url: document.baseURI,\r\n        identifier: this.$route ? this.$route.path : window.location.pathname\r\n      }\r\n\r\n      Object.assign(disqusConfig.page, defaultConfig)\r\n\r\n      if (this.pageConfig && Object.keys(this.pageConfig).length) {\r\n        Object.assign(disqusConfig.page, this.pageConfig)\r\n      }\r\n    },\r\n\r\n    cbDisqus (disqusConfig) {\r\n      CALLBACKS.forEach(cb => {\r\n        disqusConfig.callbacks[cb] = [e => {\r\n          this.$emit(getEmitName(cb), e)\r\n        }]\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"min-height\":\"200px\"},attrs:{\"id\":\"disqus_thread\"}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./Disqus.vue?vue&type=template&id=57440f75&\"\nimport script from \"./Disqus.vue?vue&type=script&lang=js&\"\nexport * from \"./Disqus.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../cache-loader/dist/cjs.js??ref--0-0!../../vue-loader/lib/index.js??vue-loader-options!./Disqus.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../cache-loader/dist/cjs.js??ref--0-0!../../vue-loader/lib/index.js??vue-loader-options!./Disqus.vue?vue&type=script&lang=js&\"","export * from \"-!../../cache-loader/dist/cjs.js?{\\\"cacheDirectory\\\":\\\"node_modules/@vuepress/core/node_modules/.cache/vuepress\\\",\\\"cacheIdentifier\\\":\\\"3cbb318b-vue-loader-template\\\"}!../../vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../cache-loader/dist/cjs.js??ref--0-0!../../vue-loader/lib/index.js??vue-loader-options!./Disqus.vue?vue&type=template&id=57440f75&\"","export const ERROR_SHORTNAME_REQUIRED = 'Disqus shortname is required. (To resolve this, go to: https://ktquez.github.io/vue-disqus/setup.html#installation)'\r\nexport const PAGE_CONFIG_KEYS = ['api_key', 'author_s3', 'category_id', 'identifier', 'integration', 'language', 'remote_auth_s3', 'slug', 'title', 'url']\r\nexport const SSO_KEYS = ['name', 'button', 'icon', 'url', 'logout', 'width', 'height']\r\nexport const CALLBACKS = ['afterRender', 'onInit', 'onIdentify', 'beforeComment', 'onNewComment', 'onPaginate', 'onReady', 'preData', 'preInit', 'preReset']\r\n","export const getEmitName = str => str.replace(/([a-z0-9])([A-Z])/g, '$1-$2').toLowerCase().replace('on-', '')\r\nexport const draf = (cb) => requestAnimationFrame(() => requestAnimationFrame(cb))\r\n"],"sourceRoot":""}