import{S as Gs,i as Us,s as Js,C as ws,y as Ks,z as Ns,A as Qs,H as Ws,$ as Bs,g as Xs,d as Ys,B as sa,L as Ds,k as p,q as t,a as b,l,m as i,r as e,h as n,c as w,n as h,b as m,G as a,I as aa}from"./index.37f37dfa.js";import{P as na}from"./post.47922bc8.js";function ta(O){let o,_,y,r,c,d,$,Q,F,W,X,j,Y,ss,B,as,ns,D,ts,es,Z,E,qs=`<code class="language-ruby"><span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string-literal"><span class="token string">"field"</span></span><span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token operator">%=</span> f<span class="token punctuation">.</span>input <span class="token symbol">:start_time</span><span class="token punctuation">,</span>
              <span class="token symbol">:label</span><span class="token operator">=></span><span class="token string-literal"><span class="token string">"Start Time:"</span></span><span class="token punctuation">,</span>
              <span class="token symbol">:default</span><span class="token operator">=></span>appt<span class="token punctuation">.</span>start_time<span class="token punctuation">,</span>
              <span class="token symbol">:wrapper</span><span class="token operator">=></span><span class="token boolean">false</span><span class="token punctuation">,</span>
              <span class="token symbol">:simple_time_select</span> <span class="token operator">=></span> <span class="token boolean">true</span><span class="token punctuation">,</span>
              <span class="token symbol">:label_html</span><span class="token operator">=></span><span class="token punctuation">&#123;</span><span class="token symbol">:class</span><span class="token operator">=></span><span class="token string-literal"><span class="token string">"head"</span></span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
              <span class="token symbol">:minute_interval</span> <span class="token operator">=></span> <span class="token number">5</span><span class="token punctuation">,</span>
              <span class="token symbol">:time_separator</span> <span class="token operator">=></span> <span class="token string-literal"><span class="token string">""</span></span><span class="token punctuation">,</span>
              <span class="token symbol">:start_hour</span> <span class="token operator">=></span> <span class="token number">06</span><span class="token punctuation">,</span>
              <span class="token symbol">:end_hour</span> <span class="token operator">=></span> <span class="token number">17</span>
   <span class="token string-literal"><span class="token string">%>
&lt;/div></span></span></code>`,G,g,os,I,ps,ls,V,is,rs,U,S,Ms=`<code class="language-ruby"><span class="token operator">&lt;</span>div <span class="token keyword">class</span><span class="token operator">=</span><span class="token string-literal"><span class="token string">"field"</span></span><span class="token operator">></span>
  <span class="token operator">&lt;</span><span class="token string-literal"><span class="token string">%- time_start = Time.now.change(:hour=>6,:minute=>0) %>
  &lt;%-</span></span> time_end <span class="token operator">=</span> <span class="token builtin">Time</span><span class="token punctuation">.</span>now<span class="token punctuation">.</span>change<span class="token punctuation">(</span><span class="token symbol">:hour</span><span class="token operator">=></span><span class="token number">17</span><span class="token punctuation">,</span><span class="token symbol">:minute</span><span class="token operator">=></span><span class="token number">55</span><span class="token punctuation">)</span> <span class="token string-literal"><span class="token string">%>
  &lt;%- period = 5.minutes %></span></span>
  <span class="token operator">&lt;</span><span class="token operator">%=</span> f<span class="token punctuation">.</span>input <span class="token symbol">:start_time</span><span class="token punctuation">,</span>
           <span class="token symbol">:as</span><span class="token operator">=></span><span class="token symbol">:collection_select</span><span class="token punctuation">,</span>
           <span class="token symbol">:required</span><span class="token operator">=></span><span class="token boolean">true</span><span class="token punctuation">,</span>
           <span class="token symbol">:include_blank</span> <span class="token operator">=></span> <span class="token string-literal"><span class="token string">''</span></span><span class="token punctuation">,</span>
           <span class="token symbol">:selected</span><span class="token operator">=></span><span class="token punctuation">(</span>
             f<span class="token punctuation">.</span>object<span class="token punctuation">.</span>start_time<span class="token punctuation">.</span>blank<span class="token operator">?</span> <span class="token operator">?</span>
               <span class="token string-literal"><span class="token string">""</span></span> <span class="token operator">:</span> f<span class="token punctuation">.</span>object<span class="token punctuation">.</span>start_time<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"%H:%M"</span></span><span class="token punctuation">)</span>
           <span class="token punctuation">)</span><span class="token punctuation">,</span>
           <span class="token symbol">:input_html</span><span class="token operator">=></span><span class="token punctuation">&#123;</span>
             <span class="token symbol">:name</span><span class="token operator">=></span><span class="token string-literal"><span class="token string">"appt[start_time(5i)]"</span></span><span class="token punctuation">,</span>
             <span class="token symbol">:id</span><span class="token operator">=></span><span class="token string-literal"><span class="token string">"appt_start_time_5i"</span></span><span class="token punctuation">&#125;</span><span class="token punctuation">,</span>
           <span class="token symbol">:collection</span><span class="token operator">=></span> <span class="token punctuation">(</span>
             <span class="token punctuation">[</span>time_start<span class="token punctuation">]</span><span class="token punctuation">.</span>tap<span class="token punctuation">&#123;</span>
               <span class="token operator">|</span>array<span class="token operator">|</span> array <span class="token operator">&lt;&lt;</span> array<span class="token punctuation">.</span>last <span class="token operator">+</span> period
                 <span class="token keyword">while</span> array<span class="token punctuation">.</span>last <span class="token operator">&lt;</span> time_end
             <span class="token punctuation">&#125;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>map<span class="token punctuation">&#123;</span>
               <span class="token operator">|</span>t<span class="token operator">|</span> <span class="token punctuation">[</span>t<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"%l:%M %p"</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span>strftime<span class="token punctuation">(</span><span class="token string-literal"><span class="token string">"%H:%M"</span></span><span class="token punctuation">)</span><span class="token punctuation">]</span>
             <span class="token punctuation">&#125;</span>
   <span class="token string-literal"><span class="token string">%>
&lt;/div></span></span></code>`,J,H,cs,K,L,us,N,k,P,R,ms,ds,ks,q,A,fs,hs,M,T,_s,ys,z,x,gs;return{c(){o=p("p"),_=t(`Before I migrated to Rails 3.2, I used a plugin to provide a unified input field
for time_select with either the standard Rails ActionView or the SimpleForm gem
(SimpleForm uses ActionView under the hood). I was happy until the Rails upgrade
caused my gem to inexplicably stop working. I had a deadline to meet and could
not be bothered with complicated solutions. I searched and searched for
alternatives to this fine gem, but none were found. Then it hit me: why not just
write my own code and replace the inputs with my own code? Surely it can't take
too long to build a time input based on the simple_time_select gem! So here it
is: my simple version of the gem, with only a few modifications from the
simple_time_select gem.`),y=b(),r=p("p"),c=t(`Here is my old code, utilizing simple_time_select. The gem is used only
if `),d=p("code"),$=t(":simple_time_select"),Q=t(" is true, and it uses the "),F=p("code"),W=t(":minute_interval"),X=t(`,
`),j=p("code"),Y=t(":time_separator"),ss=t(", "),B=p("code"),as=t(":start_hour"),ns=t(", "),D=p("code"),ts=t(":end_hour"),es=t(`, and a host of other options for setting
the times. I wish it had a way for specifying just a start_time and end_time.`),Z=b(),E=p("pre"),G=b(),g=p("p"),os=t(`I had to search for an algorithm to use for the periodicity, and settled on the
algorithm discussed in `),I=p("a"),ps=t(`this discussion on Stack
Overflow`),ls=t(`,
and is inlined as the :collection option. Since the :default option removes the
inital blank I wanted as the first item in the list, I has to add a blank
`),V=p("code"),is=t(":include_blank"),rs=t(" option."),U=b(),S=p("pre"),J=b(),H=p("p"),cs=t(`I am sure you can wrap this in a Helper class somewhere, and it should be easy
to monkeypatch ActiveView or SimpleForm to display this instead of the default.`),K=b(),L=p("p"),us=t("References:"),N=b(),k=p("ul"),P=p("li"),R=p("a"),ms=t("Stack Overflow discussion on time periodicity in Rails"),ds=t(" (used for periodicity algorithm)"),ks=b(),q=p("li"),A=p("a"),fs=t("Tutorial on using simple_time_select"),hs=b(),M=p("li"),T=p("a"),_s=t("SimpleForm gem"),ys=b(),z=p("li"),x=p("a"),gs=t("simple_time_select gem"),this.h()},l(s){o=l(s,"P",{});var u=i(o);_=e(u,`Before I migrated to Rails 3.2, I used a plugin to provide a unified input field
for time_select with either the standard Rails ActionView or the SimpleForm gem
(SimpleForm uses ActionView under the hood). I was happy until the Rails upgrade
caused my gem to inexplicably stop working. I had a deadline to meet and could
not be bothered with complicated solutions. I searched and searched for
alternatives to this fine gem, but none were found. Then it hit me: why not just
write my own code and replace the inputs with my own code? Surely it can't take
too long to build a time input based on the simple_time_select gem! So here it
is: my simple version of the gem, with only a few modifications from the
simple_time_select gem.`),u.forEach(n),y=w(s),r=l(s,"P",{});var f=i(r);c=e(f,`Here is my old code, utilizing simple_time_select. The gem is used only
if `),d=l(f,"CODE",{});var vs=i(d);$=e(vs,":simple_time_select"),vs.forEach(n),Q=e(f," is true, and it uses the "),F=l(f,"CODE",{});var Es=i(F);W=e(Es,":minute_interval"),Es.forEach(n),X=e(f,`,
`),j=l(f,"CODE",{});var Is=i(j);Y=e(Is,":time_separator"),Is.forEach(n),ss=e(f,", "),B=l(f,"CODE",{});var Ss=i(B);as=e(Ss,":start_hour"),Ss.forEach(n),ns=e(f,", "),D=l(f,"CODE",{});var Rs=i(D);ts=e(Rs,":end_hour"),Rs.forEach(n),es=e(f,`, and a host of other options for setting
the times. I wish it had a way for specifying just a start_time and end_time.`),f.forEach(n),Z=w(s),E=l(s,"PRE",{class:!0});var zs=i(E);zs.forEach(n),G=w(s),g=l(s,"P",{});var C=i(g);os=e(C,`I had to search for an algorithm to use for the periodicity, and settled on the
algorithm discussed in `),I=l(C,"A",{href:!0,rel:!0});var As=i(I);ps=e(As,`this discussion on Stack
Overflow`),As.forEach(n),ls=e(C,`,
and is inlined as the :collection option. Since the :default option removes the
inital blank I wanted as the first item in the list, I has to add a blank
`),V=l(C,"CODE",{});var Ts=i(V);is=e(Ts,":include_blank"),Ts.forEach(n),rs=e(C," option."),C.forEach(n),U=w(s),S=l(s,"PRE",{class:!0});var Zs=i(S);Zs.forEach(n),J=w(s),H=l(s,"P",{});var xs=i(H);cs=e(xs,`I am sure you can wrap this in a Helper class somewhere, and it should be easy
to monkeypatch ActiveView or SimpleForm to display this instead of the default.`),xs.forEach(n),K=w(s),L=l(s,"P",{});var Os=i(L);us=e(Os,"References:"),Os.forEach(n),N=w(s),k=l(s,"UL",{});var v=i(k);P=l(v,"LI",{});var bs=i(P);R=l(bs,"A",{href:!0,rel:!0});var $s=i(R);ms=e($s,"Stack Overflow discussion on time periodicity in Rails"),$s.forEach(n),ds=e(bs," (used for periodicity algorithm)"),bs.forEach(n),ks=w(v),q=l(v,"LI",{});var Hs=i(q);A=l(Hs,"A",{href:!0,rel:!0});var Ls=i(A);fs=e(Ls,"Tutorial on using simple_time_select"),Ls.forEach(n),Hs.forEach(n),hs=w(v),M=l(v,"LI",{});var Ps=i(M);T=l(Ps,"A",{href:!0,rel:!0});var Cs=i(T);_s=e(Cs,"SimpleForm gem"),Cs.forEach(n),Ps.forEach(n),ys=w(v),z=l(v,"LI",{});var Fs=i(z);x=l(Fs,"A",{href:!0,rel:!0});var js=i(x);gs=e(js,"simple_time_select gem"),js.forEach(n),Fs.forEach(n),v.forEach(n),this.h()},h(){h(E,"class","language-ruby"),h(I,"href","http://stackoverflow.com/questions/6783589/display-15-minute-steps-between-two-given-times"),h(I,"rel","nofollow"),h(S,"class","language-ruby"),h(R,"href","http://stackoverflow.com/questions/6783589/display-15-minute-steps-between-two-given-times"),h(R,"rel","nofollow"),h(A,"href","http://www.tonyamoyal.com/2009/04/21/simple-time-select-the-most-compact-time_select-for-ruby-on-rails/"),h(A,"rel","nofollow"),h(T,"href","https://github.com/plataformatec/simple_form"),h(T,"rel","nofollow"),h(x,"href","https://github.com/tamoyal/simple_time_select"),h(x,"rel","nofollow")},m(s,u){m(s,o,u),a(o,_),m(s,y,u),m(s,r,u),a(r,c),a(r,d),a(d,$),a(r,Q),a(r,F),a(F,W),a(r,X),a(r,j),a(j,Y),a(r,ss),a(r,B),a(B,as),a(r,ns),a(r,D),a(D,ts),a(r,es),m(s,Z,u),m(s,E,u),E.innerHTML=qs,m(s,G,u),m(s,g,u),a(g,os),a(g,I),a(I,ps),a(g,ls),a(g,V),a(V,is),a(g,rs),m(s,U,u),m(s,S,u),S.innerHTML=Ms,m(s,J,u),m(s,H,u),a(H,cs),m(s,K,u),m(s,L,u),a(L,us),m(s,N,u),m(s,k,u),a(k,P),a(P,R),a(R,ms),a(P,ds),a(k,ks),a(k,q),a(q,A),a(A,fs),a(k,hs),a(k,M),a(M,T),a(T,_s),a(k,ys),a(k,z),a(z,x),a(x,gs)},p:aa,d(s){s&&n(o),s&&n(y),s&&n(r),s&&n(Z),s&&n(E),s&&n(G),s&&n(g),s&&n(U),s&&n(S),s&&n(J),s&&n(H),s&&n(K),s&&n(L),s&&n(N),s&&n(k)}}}function ea(O){let o,_;const y=[O[0],Vs];let r={$$slots:{default:[ta]},$$scope:{ctx:O}};for(let c=0;c<y.length;c+=1)r=ws(r,y[c]);return o=new na({props:r}),{c(){Ks(o.$$.fragment)},l(c){Ns(o.$$.fragment,c)},m(c,d){Qs(o,c,d),_=!0},p(c,[d]){const $=d&1?Ws(y,[d&1&&Bs(c[0]),d&0&&Bs(Vs)]):{};d&2&&($.$$scope={dirty:d,ctx:c}),o.$set($)},i(c){_||(Xs(o.$$.fragment,c),_=!0)},o(c){Ys(o.$$.fragment,c),_=!1},d(c){sa(o,c)}}}const Vs={comments:!0,view:"post",layout:"post",lang:"en",author:"skamansam",title:"Building a unified `time_select` field",description:"Build a unified `time_select` field",excerpt:"I was happy until the Rails upgrade caused my gem to inexplicably stop working.",cover:!1,coverImage:!1,coverAlt:"RBE Logo",categories:["ruby"],tags:["Ruby on Rails"],created_at:"2013-04-10T11:10:11.000Z",updated_at:"2013-04-10T11:10:11.000Z"};function oa(O,o,_){return O.$$set=y=>{_(0,o=ws(ws({},o),Ds(y)))},o=Ds(o),[o]}class ia extends Gs{constructor(o){super(),Us(this,o,oa,ea,Js,{})}}export{ia as default,Vs as metadata};
